% packages
\usepackage{graphicx}
\usepackage{setspace}
\usepackage{amssymb,amsmath,amsthm,amsfonts,amscd}
\usepackage{hyperref}
\usepackage{color}
\usepackage{booktabs}
\usepackage{tabularx}
\usepackage{enumitem}
\usepackage[retainorgcmds]{IEEEtrantools}
\usepackage[notref,notcite,final]{showkeys}
\usepackage[final]{pdfpages}
\usepackage{fancyhdr}
\usepackage{upgreek}
\usepackage{multicol}
\usepackage{fancyvrb}
\usepackage{listings}
\usepackage{bussproofs}
\usepackage{fontawesome}
\usepackage{halloweenmath}
\usepackage{ytableau}
\usepackage{mathtools}

% this package allows conditionals on content. see part B/combo project for example
\usepackage{etoolbox}

% set margin as 0.75in
\usepackage[margin=.75in]{geometry}

% tikz-related settings
\usepackage{tikz}
\usepackage{tikz-cd}
\usetikzlibrary{cd}
%% For tables
\usepackage{tikz}
\usetikzlibrary{tikzmark}

\theoremstyle{definition}
\newtheorem{defn}{Definition}
\newtheorem{rem}[defn]{Remark}
\newtheorem{note}[defn]{Note}
\newtheorem{lem}[defn]{Lemma}
\newtheorem{ex}[defn]{Example}
\newtheorem{conj}[defn]{Conjecture}
%\newtheorem{numex}[defn]{Numerical Example}

\theoremstyle{plain}
\newtheorem{thm}[defn]{Theorem}
\newtheorem{prop}[defn]{Proposition}
\newtheorem{cor}[defn]{Corollary}
\newtheorem{question}[defn]{Question}

% special sets
\newcommand{\A}{\mathbb{A}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\F}{\mathbb{F}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\cals}{\mathcal{S}}
\newcommand{\ZZ}{\mathbb{Z}_{\ge 0}}
%\newcommand{\cala}{\mathcal{A}}
%\newcommand{\la}{\mathbf{a}}
%\newcommand{\lgl}{\mathfrak{gl}}
%\newcommand{\lsl}{\mathfrak{sl}}
%\newcommand{\lieg}{\mathfrak{g}}

% math operators
\DeclareMathOperator{\kernel}{\mathrm{ker}}
\DeclareMathOperator{\image}{\mathrm{im}}
\newcommand{\im}{\operatorname{Im}}
%\DeclareMathOperator{\rad}{\mathrm{rad}}
%\DeclareMathOperator{\id}{\mathrm{id}}
%\DeclareMathOperator{\hum}{[\mathrm{Hum}]}
%\DeclareMathOperator{\eh}{[\mathrm{EH}]}
\DeclareMathOperator{\lcm}{\mathrm{lcm}}
\DeclareMathOperator{\Aut}{\mathrm{Aut}}
\DeclareMathOperator{\Inn}{\mathrm{Inn}}
\DeclareMathOperator{\Out}{\mathrm{Out}}
\DeclareMathOperator{\Gal}{\mathrm{Gal}}
\DeclareMathOperator{\Real}{\mathrm{Re}}
\DeclareMathOperator{\Imag}{\mathrm{Im}}
\DeclareMathOperator{\res}{\mathrm{res}}
\DeclareMathOperator{\Ind}{\mathrm{Ind}\hspace{-.8mm}\uparrow}
\DeclareMathOperator{\Res}{\mathrm{Res}\hspace{-.8mm}\downarrow}
\DeclareMathOperator{\tr}{\mathrm{tr}}
\DeclareMathOperator{\spark}{\mathrm{spark}}
\DeclareMathOperator{\rank}{\mathrm{rank}}


% frequently used shorthands
\newcommand{\ra}{\rightarrow}
\newcommand{\se}{\subseteq}
\newcommand{\ip}[1]{\left\langle #1 \right\rangle} % broken???
\newcommand{\abs}[1]{\left| #1 \right|}
\newcommand{\bracs}[1]{\left[ #1 \right]}
\newcommand{\norm}[1]{\abs{\hspace{-.06cm}\abs{#1}\hspace{-.06cm}}}

% better matrix
\makeatletter
\renewcommand*\env@matrix[1][*\c@MaxMatrixCols c]{%
  \hskip -\arraycolsep
  \let\@ifnextchar\new@ifnextchar
  \array{#1}}
\makeatother

%my stupid commands
\newcommand{\overbar}[1]{\overline{#1}}

% dark mode. use:
%\def\darktheme{}
\ifx \darktheme\undefined
\else
\pagecolor[rgb]{0.2,0.231,0.302}%{0.23,0.258,0.321}
\color[rgb]{1,1,1}
\fi

% nicer looking empty set
\let\oldemptyset\emptyset
\let\emptyset\varnothing

%the var phi gang
\let\oldphi\phi
\let\phi\varphi

% projective space with /P
\let\PP\P
\newcommand{\PPt}{\mathbb{P}}
\let\P\PPt

% i dont know what this does
\setlist[enumerate,1]{topsep=1em,leftmargin=1.8em, itemsep=0.5em, label=\textup{(}\arabic*\textup{)}}
\setlist[enumerate,2]{topsep=0.5em,leftmargin=3em, itemsep=0.3em}


\newcommand{\idj}[1]{\marginpar{$\leftarrow$\fbox{I}}\footnote{\sf {\color{blue}Ian: \emph{#1}}}}
\newcommand{\idjtodo}[1]{{\color{blue}[Ian: \emph{#1}]}}

\DeclareRobustCommand{\rchi}{{\mathpalette\irchi\relax}}
\newcommand{\irchi}[2]{\raisebox{\depth}{$#1\chi$}} % inner command, used by \rchi